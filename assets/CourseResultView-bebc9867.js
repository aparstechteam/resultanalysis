import{u as S,r as o,o as n,c as u,b as e,h as k,v as C,n as N,F as b,f as y,j as p,k as x,t as l,_ as E}from"./index-a23329c6.js";const I={key:0,class:"w-[450px] mx-auto card"},L={class:"card-body"},R=e("h2",{class:"text-xl font-semibold"},"Search a student",-1),V={key:1},$=e("h2",null," Loading... ",-1),B=[$],F={class:"mt-5 space-y-5"},j={class:"relative card-body"},D=e("span",{class:"font-semibold"},"Name:",-1),J=e("span",{class:"font-semibold"},"Course:",-1),T=e("span",{class:"font-semibold"},"Joining Id:",-1),z=e("img",{src:E,alt:"",class:"absolute h-10 top-10 right-5"},null,-1),A={class:"overflow-x-auto"},M={class:"table"},U=e("thead",null,[e("tr",null,[e("th",null,"SL No"),e("th",null,"Exam"),e("th",null,"Score"),e("th",null,"Rank")])],-1),q=e("th",null,null,-1),G=e("td",null," Average Score ",-1),H=e("td",null,null,-1),X={__name:"CourseResultView",setup(K){const i=S().params.id,g=o(null);o(null);const _=o(""),h=o([]),m=o(!1);(async()=>{m.value=!0;const a=await p.get(`/exam/${i}/course`);h.value=a.data,m.value=!1})();const f=o(null);(async()=>{const a=await p.get(`/course/${i}`);f.value=a.data})();const r=o(!1),w=async()=>{r.value=!0;try{const a=await p.get(`/result/search?search=${_.value}&courseId=${i}`);let{results:d}=await a.data;g.value=d.map(s=>({...s,results:s.results.map(c=>{var t;return{...c,examName:(t=h.value.find(v=>v._id===c.exam_id))==null?void 0:t.name}}),averageScore:(s.results.reduce((c,t)=>c+t.score,0)/h.value.length).toFixed(2)})),r.value=!1}catch(a){r.value=!1,console.log(a)}};return(a,d)=>(n(),u("div",null,[m.value?(n(),u("div",V,B)):(n(),u("div",I,[e("div",L,[R,k(e("input",{type:"text",placeholder:"Search by name or Joining Id","onUpdate:modelValue":d[0]||(d[0]=s=>_.value=s),class:"input input-bordered"},null,512),[[C,_.value]]),e("button",{onClick:w,class:N(["mt-3 btn",{loading:r.value}])},"Search a student",2)])])),e("div",F,[(n(!0),u(b,null,y(g.value,(s,c)=>(n(),u("div",{class:"w-[550px] mx-auto border card",key:c},[e("div",j,[e("div",null,[e("p",null,[D,x(" "+l(s.name),1)]),e("p",null,[J,x(" "+l(f.value.name),1)]),e("p",null,[T,x(" "+l(s.joiningId),1)])]),z,e("div",null,[e("div",A,[e("table",M,[U,e("tbody",null,[(n(!0),u(b,null,y(s.results,(t,v)=>(n(),u("tr",{key:t._id},[e("th",null,l(v+1),1),e("td",null,l(t.examName),1),e("td",null,l(t.score),1),e("td",null,l(t.rank),1)]))),128))]),e("tfoot",null,[q,G,e("td",null,l(s.averageScore),1),H])])])])])]))),128))])]))}};export{X as default};
