import{u as A,r as l,a as D,o as i,c as d,b as e,d as g,w,e as y,F as k,f as E,g as N,h as b,v,i as U,j as u,k as r,t as m}from"./index-dbdb631f.js";import"./lodash-fb661e38.js";const L={class:"pb-10"},Q={class:"text-center"},T={class:"max-w-xl p-5 mx-auto my-5 space-y-3 rounded-lg"},B={class:""},I={class:"text-xl font-semibold"},F={class:"flex gap-3 mt-3"},R={class:"btn btn-sm"},j=["href"],K=e("img",{class:"w-6 h-6",src:"https://img.icons8.com/fluency/48/google-sheets.png",alt:"google-sheets"},null,-1),M=["onClick"],O=e("span",{class:"text-red-500 material-icons"}," delete ",-1),X=e("span",{class:"material-icons"}," send ",-1),z={class:"w-[450px] mx-auto border card"},G={class:"card-body"},H=e("h2",{class:"text-xl font-semibold"},"Add Exam",-1),J=["onSubmit"],P=e("button",{class:"btn"},"Add Exam",-1),W={class:"flex"},Y={key:0,class:"max-w-4xl mx-auto mt-3"},Z=e("h1",{class:"text-xl font-semibold"},"Exam List",-1),ee={class:"overflow-x-auto"},te={class:"table"},se=e("thead",null,[e("tr",null,[e("th",null,"SL No"),e("th",null,"Topic"),e("th",null,"Exam"),e("th",null,"Actions")])],-1),oe=["href"],ne=e("img",{class:"w-6 h-6",src:"https://img.icons8.com/fluency/48/google-sheets.png",alt:"google-sheets"},null,-1),ae=["onClick"],le=e("span",{class:"material-icons"}," delete ",-1),me={__name:"CourseView",setup(ce){const c=A().params.id,n=l({name:"",course:c,question:""}),h=l([]),p=async()=>{const o=await u.get(`/exam/${c}/course`);h.value=o.data};p();const C=async()=>{const o=await u.post("/exam",{name:n.value.name,course:n.value.course,question:n.value.question.substr(39,44)});h.value.push(o.data),n.value={name:"",course:c,question:""}},q=async o=>{await u.delete(`/exam/${o}`),p()},_=l(""),a=l([]),$=async()=>{const o=await u.get(`https://script.google.com/macros/s/AKfycbxEnSLBrQ3eGYvAIJwU0ykmUzxqIWDHg8swwnuevhha59AO6NEXpX_ux5PC_KfywQU4/exec?s=${_.value.substr(39,44)}&sname=examlist`);a.value=o.data.map(s=>({id:s.id,name:s.topic,course:c,question:s.exam.substr(39,44)})).filter(s=>s.name)},S=o=>{a.value=a.value.filter(s=>s.id!==o)},V=async()=>{await u.post("/exam/import",a.value),a.value=[],p()};return l(null),l(!1),l(!1),(o,s)=>{const f=D("router-link");return i(),d("div",L,[e("div",null,[e("div",Q,[g(f,{to:`/course/result/${y(c)}`,class:"btn"},{default:w(()=>[r(" Overall Course Result ")]),_:1},8,["to"])]),e("div",T,[(i(!0),d(k,null,E(h.value,t=>(i(),d("div",{class:"flex items-center justify-between p-3 border rounded-lg",key:t._id},[e("div",B,[e("h1",I,m(t.name),1),e("div",F,[e("span",R," Total: "+m(t.totalResponses),1),e("a",{class:"btn btn-sm",href:`https://docs.google.com/spreadsheets/d/${t.question}/edit#gid=1573239885`},[r(" Question "),K],8,j),e("button",{class:"btn btn-sm btn-danger",onClick:x=>q(t._id)},[r(" Delete "),O],8,M)])]),g(f,{to:`/exam/import/${y(c)}/${t._id}`,class:"border shadow-md btn btn-circle"},{default:w(()=>[X]),_:2},1032,["to"])]))),128))])]),e("div",z,[e("div",G,[H,e("form",{onSubmit:N(C,["prevent"]),class:"flex flex-col gap-3"},[b(e("input",{type:"text",placeholder:"Exam Topic","onUpdate:modelValue":s[0]||(s[0]=t=>n.value.name=t),class:"input input-bordered"},null,512),[[v,n.value.name]]),b(e("input",{type:"text",placeholder:"Question Link","onUpdate:modelValue":s[1]||(s[1]=t=>n.value.question=t),class:"input input-bordered"},null,512),[[v,n.value.question]]),P],40,J),e("div",W,[b(e("input",{type:"text","onUpdate:modelValue":s[2]||(s[2]=t=>_.value=t),placeholder:"Exam list sheet",class:"flex-1 mr-2 input input-bordered"},null,512),[[v,_.value]]),e("button",{class:"btn",onClick:$},"Fetch Sheet")])])]),a.value.length>0?(i(),d("div",Y,[e("div",{class:"mb-3 text-center"},[Z,e("button",{class:"btn",onClick:V}," Import ")]),e("div",ee,[e("table",te,[se,e("tbody",null,[(i(!0),d(k,null,E(a.value,(t,x)=>(i(),d("tr",{key:x},[e("th",null,m(x+1),1),e("td",null,m(t.name),1),e("td",null,[e("a",{class:"btn btn-sm",href:`https://docs.google.com/spreadsheets/d/${t.question}/edit#gid=1573239885`},[r(" Question "),ne],8,oe)]),e("td",null,[e("button",{class:"text-white btn btn-sm btn-error",onClick:de=>S(t.id)},[r(" Delete "),le],8,ae)])]))),128))])])])])):U("",!0)])}}};export{me as default};
