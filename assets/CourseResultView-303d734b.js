import{u as w,r as n,o as u,c,b as e,h as S,v as C,n as N,F as g,f as b,j as m,k as p,t as a,_ as k}from"./index-19606eaf.js";const I={class:"w-[450px] mx-auto card"},R={class:"card-body"},E=e("h2",{class:"text-xl font-semibold"},"Search a student",-1),V={class:"mt-5 space-y-5"},$={class:"relative card-body"},B=e("span",{class:"font-semibold"},"Name:",-1),F=e("span",{class:"font-semibold"},"Course:",-1),L=e("span",{class:"font-semibold"},"Joining Id:",-1),j=e("img",{src:k,alt:"",class:"absolute h-10 top-10 right-5"},null,-1),D={class:"overflow-x-auto"},J={class:"table"},T=e("thead",null,[e("tr",null,[e("th",null,"SL No"),e("th",null,"Exam"),e("th",null,"Score"),e("th",null,"Rank")])],-1),z=e("th",null,null,-1),A=e("td",null," Average Score ",-1),M=e("td",null,null,-1),O={__name:"CourseResultView",setup(U){const d=w().params.id,v=n(null);n(null);const i=n(""),_=n([]);(async()=>{const l=await m.get(`/exam/${d}/course`);_.value=l.data})();const x=n(null);(async()=>{const l=await m.get(`/course/${d}`);x.value=l.data})();const h=n(!1),f=async()=>{h.value=!0;const l=await m.get(`/result/search?search=${i.value}&courseId=${d}`);let{results:r}=await l.data;v.value=r.map(s=>({...s,results:s.results.map(o=>({...o,examName:_.value.find(t=>t._id===o.exam_id).name})),averageScore:(s.results.reduce((o,t)=>o+t.score,0)/_.value.length).toFixed(2)})),h.value=!1};return(l,r)=>(u(),c("div",null,[e("div",I,[e("div",R,[E,S(e("input",{type:"text",placeholder:"Search by name or Joining Id","onUpdate:modelValue":r[0]||(r[0]=s=>i.value=s),class:"input input-bordered"},null,512),[[C,i.value]]),e("button",{onClick:f,class:N(["mt-3 btn",{loading:h.value}])},"Search a student",2)])]),e("div",V,[(u(!0),c(g,null,b(v.value,(s,o)=>(u(),c("div",{class:"w-[550px] mx-auto border card",key:o},[e("div",$,[e("div",null,[e("p",null,[B,p(" "+a(s.name),1)]),e("p",null,[F,p(" "+a(x.value.name),1)]),e("p",null,[L,p(" "+a(s.joiningId),1)])]),j,e("div",null,[e("div",D,[e("table",J,[T,e("tbody",null,[(u(!0),c(g,null,b(s.results,(t,y)=>(u(),c("tr",{key:t._id},[e("th",null,a(y+1),1),e("td",null,a(t.examName),1),e("td",null,a(t.score),1),e("td",null,a(t.rank),1)]))),128))]),e("tfoot",null,[z,A,e("td",null,a(s.averageScore),1),M])])])])])]))),128))])]))}};export{O as default};
